" vim: ft=vim

let mapleader = "\<Space>"

" mostly use vim commands, but override some shortcuts I use all the time
sethandler a:vim
sethandler <C-g> a:ide
sethandler <S-CR> a:vim
sethandler <C-Pageup> a:vim
sethandler <C-Pagedown> a:vim
sethandler <C-a> a:ide
sethandler <C-e> n:ide
sethandler <C-n> n:ide
sethandler <C-c> v-x:ide
sethandler <C-x> v-x:ide
sethandler <C-v> v-x:ide
sethandler <C-q> a:ide


set clipboard='unnamed,unnamedplus'
set relativenumber
set ideajoin
" allow pretty much all motions to change lines
set whichwrap=b,s,h,l,<,>,[,]
" search can wrap
set wrapscan
" case-insensitive search unless mixed case search string
set smartcase
set hlsearch
set incsearch
" allow moving one space past EOL
set virtualedit=onemore
set scrolloff=15

" turn on which-key and disable command timeout
set which-key
" set timeoutlen=5000
set notimeout
" which-key descrs, built-ins only show if g:WhichKey_ShowVimActions is true
let g:WhichKeyDesc_goto_top = "gg goto first line"


" clear highlighting on escape
nmap <Esc> :nohls<CR>

map <leader>vce :e ~/.config/ideavim/.ideavimrc<CR>
map <leader>vco :action IdeaVim.ReloadVimRc.reload<CR>
map <leader>vcr :source ~/.config/ideavim/.ideavimrc<CR>
map <leader>vci :set trackactionids!<CR>

noremap <leader>gl :action Vcs.Show.Log<CR>
nmap Y y$

" IDEA quick actions
nmap <leader>a :action GotoAction<CR>
nmap gh :action QuickJavaDoc<CR>
nmap gd :action GotoDeclaration<CR>
nmap gu :action FindUsages<CR>
